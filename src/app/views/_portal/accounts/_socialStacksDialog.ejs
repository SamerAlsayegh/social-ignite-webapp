<md-dialog aria-label="Social Stack Editing" flex="70">
    <form name="stacks" ng-submit="submitPages()">
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h1 flex>Manage Social Stack</h1>
                <md-button class="md-icon-button" ng-click="cancel()">
                    <i class="zmdi zmdi-close zmdi-hc-2x"></i>
                </md-button>
            </div>
        </md-toolbar>
        <!--<md-divider></md-divider>-->
        <md-dialog-content>
            <div class="md-dialog-content" flex>

                <div layout="column">
                    <md-input-container layout="column" class="md-block" layout-align="stretch">
                        <label>Stack name</label>
                        <input flex ng-model="data.name" required>
                    </md-input-container>

                    <label>
                        <h2>
                            <small>Select pages to add to stack...</small>
                        </h2>
                    </label>

                    <md-card flex="30" layout="column" class="md-whiteframe-2dp md-padding" ng-init="filterName = {}">
                        <!--Pages Listed here-->
                        <span layout="column">
                            <span ng-if="allPages.length > 4" layout-align="stretch" layout="row">
                                    <md-input-container md-no-float flex class=" md-block">
                                        <!-- Use floating label instead of placeholder -->
                                        <md-icon class="zmdi zmdi-search zmdi-hc-lg"></md-icon>
                                        <input ng-model="filterName.name" placeholder="Search accounts by name"
                                               type="text">
                                    </md-input-container>
                            </span>
                            <md-list layout="column" flex style="max-height: 200px; overflow-y: auto;">
                                <md-list-item ng-repeat="pageInfo in filteredPages = (allPages | filter: filterName) "
                                              ng-click="togglePage(pageInfo._id); nextStep();">
                                    <md-button
                                            class="md-fab md-mini ui-social ui-{{platforms[pageInfo.platform].id}}"
                                            aria-label=platform>
                                        <md-tooltip md-direction="top"
                                                    ng-bind="platforms[pageInfo.platform].id"></md-tooltip>
                                        <i class="zmdi zmdi-{{platforms[pageInfo.platform].id}}"></i>
                                    </md-button>
                                    <small flex> {{ pageInfo.name }}</small>
                                    <md-checkbox class="md-primary"
                                                 ng-checked="data.socialPages.indexOf(pageInfo._id) != -1"></md-checkbox>
                                </md-list-item>
                                <md-list-item ng-if="filteredPages.length == 0">
                                    <span>
                                        No pages were found.
                                    </span>
                                </md-list-item>
                            </md-list>
                        </span>
                    </md-card>
                </div>
            </div>
        </md-dialog-content>
        <md-dialog-actions layout="row">
            <md-button ng-if="data._id != null" flex="50" flex-gt-md="20" ng-click="deleteStack()" class="md-warn">
                Delete
            </md-button>
            <md-button flex class="md-primary md-raised" type="submit">
                Apply
            </md-button>
        </md-dialog-actions>
    </form>
</md-dialog>

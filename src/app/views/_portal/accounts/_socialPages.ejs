<div layout="row" flex layout-align="center center">
    Showing
    <div layout="row" flex>
        <md-button
                ng-click="togglePlatformFilter(platform.id)"
                ng-repeat="platform in socialPlatformDetails"
                ng-class="isPlatformFiltered(platform.id) ? 'ui-social-active' : ''"
                class="md-fab md-mini ui-social ui-{{platform.shortname}}"
                aria-label=platform>
            <md-tooltip md-direction="top" ng-bind="platform.fullname"></md-tooltip>
            <i class="zmdi zmdi-{{platform.shortname}}"></i>
        </md-button>
    </div>
</div>

<div layout="column">
    <md-content layout="row" layout-wrap layout-align="start center">
        <md-card layout="column"
                 ng-repeat="socialPage in connectedAccounts" flex="100" flex-gt-md="30">
            <div layout="row">
                <div class="md-toolbar-tools">
                    <md-button
                            disabled
                            class="md-fab md-mini ui-social ui-{{platforms[socialPage.platform].id}}"
                            aria-label=platform>
                        <md-tooltip md-direction="top" ng-bind="socialPage.name"></md-tooltip>
                        <i class="zmdi zmdi-{{platforms[socialPage.platform].id}}"></i>
                    </md-button>
                    <span flex ng-bind="socialPage.name"></span>

                    <span ng-if="socialPage.statistic.updated_at != null" layout="column" class="text-center">
                            <md-button disabled aria-label="Updated time" class="md-icon-button">
                                <md-tooltip md-direction="top">Last Updated</md-tooltip>
                                <!--<i class="material-icons">refresh</i>-->
                                 <i class="white zmdi zmdi-refresh-sync zmdi-hc-lg md-padding"></i>

                            </md-button>
                            <small am-time-ago="socialPage.statistic.updated_at"></small>
                        </span>
                </div>
            </div>


            <md-card-title>
                <md-card-title-text>

                    <md-card-actions layout="row" layout-align="start">


                        <span flex ng-if="socialPage.state == 'ERROR'" class="text-center">
                            <md-button disabled class="md-icon-button" aria-label="Posts">
                                <md-tooltip md-direction="top">Page has an error...</md-tooltip>
                                 <i class="white zmdi zmdi-refresh-sync zmdi-hc-2x"></i>
                            </md-button>
                                <br>
                                Error: {{platformErrors[sociaPage.state_details.code]}}
                        </span>
                        <span flex ng-if="socialPage.statistic.updated_at == null && socialPage.state != 'ERROR'" class="text-center">
                            <md-button disabled class="md-icon-button" aria-label="Posts">
                                <md-tooltip md-direction="top">Queued for fetching...</md-tooltip>
                                 <i class="white zmdi zmdi-refresh-sync zmdi-hc-2x"></i>
                            </md-button>
                                <br>
                                Page queued for updating...
                        </span>




                        <span flex ng-if="socialPage.statistic.posts.total >= 0 && socialPage.state != 'ERROR'" class="text-center">
                            <md-button class="md-icon-button" aria-label="Posts">
                                <md-tooltip md-direction="top">Posts</md-tooltip>
                                <i class="zmdi zmdi-comments zmdi-hc-lg"></i>
                            </md-button>
                                <br>
                                {{socialPage.statistic.posts.total}}
                            </span>

                        <span flex ng-if="socialPage.statistic.views.total >= 0 && socialPage.state != 'ERROR'" class="text-center">
                                <md-button class="md-icon-button" aria-label="Impressions">
                                    <md-tooltip md-direction="top">Impressions</md-tooltip>
                                <i class="zmdi zmdi-globe zmdi-hc-lg"></i>
                                </md-button>
                                <br>
                                {{socialPage.statistic.views.total}}
                            </span>

                        <span flex ng-if="socialPage.statistic.views.unique >= 0 && socialPage.state != 'ERROR'" class="text-center">
                            <md-button class="md-icon-button" aria-label="Unique Views">
                                <md-tooltip md-direction="top">Unique Views</md-tooltip>
                                <i class="zmdi zmdi-accounts-alt zmdi-hc-lg"></i>
                            </md-button>
                                <br>
                                {{socialPage.statistic.views.unique}}
                            </span>

                        <span flex ng-if="socialPage.statistic.likes.total >= 0 && socialPage.state != 'ERROR'" class="text-center">
                            <md-button class="md-icon-button" aria-label="Fans">
                                <md-tooltip md-direction="top">Fans</md-tooltip>
                                <i class="zmdi zmdi-star zmdi-hc-lg"></i>
                            </md-button>
                                <br>
                                {{socialPage.statistic.likes.total}} {{socialPage.statistic.likes.new > 0 ? '(+' + socialPage.statistic.likes.new + ')' : ''}}
                            </span>
                    </md-card-actions>
                </md-card-title-text>
            </md-card-title>
            <md-card-actions layout="row">
                <md-button flex="30" class="md-primary" ng-click="refreshSocialAccount(socialPage._id)">Refresh
                </md-button>
                <span flex></span>
                <md-button flex="30" class="md-warn" ng-click="removeSocialAccount(socialPage._id)">Deactivate
                </md-button>
            </md-card-actions>
        </md-card>
        <md-card flex="100" ng-if="remaining > 0" ng-click="loadMoreSocialPages()" layout-align="center center">
            <h3>Load more...</h3>
        </md-card>
    </md-content>
</div>
